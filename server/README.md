# è®¾å¤‡ç®¡ç†ç³»ç»Ÿ

ä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„è®¾å¤‡ç®¡ç†ç³»ç»Ÿï¼Œæ”¯æŒè¿œç¨‹æ§åˆ¶ã€å®æ—¶ç›‘æ§ã€æ–‡ä»¶ç®¡ç†ã€ä½ç½®è¿½è¸ªç­‰åŠŸèƒ½ã€‚

## ğŸš€ åŠŸèƒ½ç‰¹æ€§

### æ ¸å¿ƒåŠŸèƒ½
- ğŸ” **ç”¨æˆ·è®¤è¯ä¸æˆæƒ** - JWTè®¤è¯ã€è§’è‰²æƒé™ç®¡ç†
- ğŸ“± **è®¾å¤‡ç®¡ç†** - è®¾å¤‡æ³¨å†Œã€çŠ¶æ€ç›‘æ§ã€è¿œç¨‹æ§åˆ¶
- ğŸ® **è¿œç¨‹æ§åˆ¶** - å±å¹•æˆªå›¾ã€åº”ç”¨æ§åˆ¶ã€ç³»ç»Ÿæ“ä½œ
- ğŸ“ **æ–‡ä»¶ç®¡ç†** - æ–‡ä»¶ä¸Šä¼ ä¸‹è½½ã€ç›®å½•æµè§ˆã€æ‰¹é‡æ“ä½œ
- ğŸ“ **ä½ç½®è¿½è¸ª** - å®æ—¶å®šä½ã€å†å²è½¨è¿¹ã€åœ°ç†å›´æ 
- ğŸ“± **åº”ç”¨ç®¡ç†** - åº”ç”¨åˆ—è¡¨ã€å®‰è£…å¸è½½ã€æƒé™æ§åˆ¶

### ä¸šåŠ¡åŠŸèƒ½
- ğŸ’³ **ä¼šå‘˜ç³»ç»Ÿ** - å¤šçº§ä¼šå‘˜ã€æƒé™æ§åˆ¶ã€ä½¿ç”¨é™åˆ¶
- ğŸ¤ **ä»£ç†ç³»ç»Ÿ** - ä»£ç†ç”³è¯·ã€ä½£é‡‘ç®¡ç†ã€å±‚çº§åˆ†é”€
- ğŸ’° **æ”¯ä»˜ç³»ç»Ÿ** - æ”¯ä»˜å®ã€å¾®ä¿¡æ”¯ä»˜ã€è®¢å•ç®¡ç†
- ğŸ”” **é€šçŸ¥ç³»ç»Ÿ** - å®æ—¶é€šçŸ¥ã€æ¶ˆæ¯æ¨é€ã€é‚®ä»¶çŸ­ä¿¡
- âš™ï¸ **ç³»ç»Ÿç®¡ç†** - ç³»ç»Ÿç›‘æ§ã€æ—¥å¿—ç®¡ç†ã€é…ç½®ç®¡ç†

### æŠ€æœ¯ç‰¹æ€§
- ğŸ”„ **å®æ—¶é€šä¿¡** - Socket.IOåŒå‘é€šä¿¡
- ğŸ“Š **APIæ–‡æ¡£** - Swaggerè‡ªåŠ¨ç”Ÿæˆæ–‡æ¡£
- ğŸ³ **å®¹å™¨åŒ–** - Docker + Docker Compose
- ğŸ§ª **æµ‹è¯•è¦†ç›–** - Jestå•å…ƒæµ‹è¯•
- ğŸ“ˆ **ç›‘æ§å‘Šè­¦** - ç³»ç»Ÿç›‘æ§ã€æ€§èƒ½åˆ†æ

## ğŸ›  æŠ€æœ¯æ ˆ

### åç«¯æŠ€æœ¯
- **è¿è¡Œæ—¶**: Node.js 18+
- **æ¡†æ¶**: Express.js
- **æ•°æ®åº“**: MySQL 8.0
- **ç¼“å­˜**: Redis 7.0
- **è®¤è¯**: JWT + bcryptjs
- **å®æ—¶é€šä¿¡**: Socket.IO
- **æ–‡æ¡£**: Swagger UI
- **æµ‹è¯•**: Jest + Supertest

### å¼€å‘å·¥å…·
- **è¿›ç¨‹ç®¡ç†**: PM2
- **å®¹å™¨åŒ–**: Docker + Docker Compose
- **ä»£ç è´¨é‡**: ESLint + Prettier
- **ç‰ˆæœ¬æ§åˆ¶**: Git

## ğŸ“‹ ç¯å¢ƒè¦æ±‚

- Node.js >= 16.0.0
- npm >= 8.0.0
- MySQL >= 8.0
- Redis >= 6.0
- Docker >= 20.0 (å¯é€‰)

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å…‹éš†é¡¹ç›®

```bash
git clone <repository-url>
cd device-management-system/server
```

### 2. å®‰è£…ä¾èµ–

```bash
npm install
```

### 3. é…ç½®ç¯å¢ƒ

å¤åˆ¶ç¯å¢ƒé…ç½®æ–‡ä»¶ï¼š
```bash
cp .env.example .env
```

ç¼–è¾‘ `.env` æ–‡ä»¶ï¼Œé…ç½®æ•°æ®åº“å’ŒRedisè¿æ¥ä¿¡æ¯ã€‚

### 4. æ•°æ®åº“åˆå§‹åŒ–

```bash
# è¿è¡Œæ•°æ®åº“è¿ç§»
npm run db:migrate

# å¡«å……åˆå§‹æ•°æ®
npm run db:seed
```

### 5. å¯åŠ¨æœåŠ¡

```bash
# å¼€å‘ç¯å¢ƒ
npm run dev

# ç”Ÿäº§ç¯å¢ƒ
npm start
```

### 6. è®¿é—®æœåŠ¡

- **APIæœåŠ¡**: http://localhost:3000
- **APIæ–‡æ¡£**: http://localhost:3000/api-docs
- **å¥åº·æ£€æŸ¥**: http://localhost:3000/api/health

## ğŸ“ é¡¹ç›®ç»“æ„

```
server/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ config/          # é…ç½®æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ config.js    # ä¸»é…ç½®
â”‚   â”‚   â”œâ”€â”€ database.js  # æ•°æ®åº“é…ç½®
â”‚   â”‚   â”œâ”€â”€ redis.js     # Redisé…ç½®
â”‚   â”‚   â””â”€â”€ swagger.js   # APIæ–‡æ¡£é…ç½®
â”‚   â”œâ”€â”€ controllers/     # æ§åˆ¶å™¨å±‚
â”‚   â”œâ”€â”€ middleware/      # ä¸­é—´ä»¶
â”‚   â”œâ”€â”€ models/          # æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ routes/          # è·¯ç”±å®šä¹‰
â”‚   â”œâ”€â”€ services/        # ä¸šåŠ¡æœåŠ¡å±‚
â”‚   â””â”€â”€ utils/           # å·¥å…·å‡½æ•°
â”œâ”€â”€ tests/               # æµ‹è¯•æ–‡ä»¶
â”œâ”€â”€ logs/                # æ—¥å¿—æ–‡ä»¶
â”œâ”€â”€ uploads/             # ä¸Šä¼ æ–‡ä»¶
â”œâ”€â”€ backups/             # å¤‡ä»½æ–‡ä»¶
â”œâ”€â”€ app.js               # åº”ç”¨ä¸»æ–‡ä»¶
â”œâ”€â”€ server.js            # æœåŠ¡å™¨å¯åŠ¨æ–‡ä»¶
â”œâ”€â”€ package.json         # é¡¹ç›®é…ç½®
â”œâ”€â”€ Dockerfile           # Dockeré…ç½®
â”œâ”€â”€ docker-compose.yml   # Docker Composeé…ç½®
â””â”€â”€ ecosystem.config.js  # PM2é…ç½®
```

## ğŸ”§ å¼€å‘æŒ‡å—

### å¯ç”¨è„šæœ¬

```bash
# å¼€å‘
npm run dev              # å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run test             # è¿è¡Œæµ‹è¯•
npm run test:watch       # ç›‘å¬æ¨¡å¼è¿è¡Œæµ‹è¯•
npm run test:coverage    # ç”Ÿæˆæµ‹è¯•è¦†ç›–ç‡æŠ¥å‘Š

# ä»£ç è´¨é‡
npm run lint             # ä»£ç æ£€æŸ¥
npm run lint:fix         # è‡ªåŠ¨ä¿®å¤ä»£ç é—®é¢˜
npm run format           # ä»£ç æ ¼å¼åŒ–

# æ•°æ®åº“
npm run db:migrate       # è¿è¡Œæ•°æ®åº“è¿ç§»
npm run db:seed          # å¡«å……æµ‹è¯•æ•°æ®
npm run db:reset         # é‡ç½®æ•°æ®åº“

# ç”Ÿäº§éƒ¨ç½²
npm run build            # æ„å»ºé¡¹ç›®
npm run pm2:start        # PM2å¯åŠ¨
npm run pm2:stop         # PM2åœæ­¢
npm run pm2:restart      # PM2é‡å¯
```

### APIæ¥å£

ä¸»è¦APIç«¯ç‚¹ï¼š

- `/api/auth` - è®¤è¯ç›¸å…³
- `/api/users` - ç”¨æˆ·ç®¡ç†
- `/api/devices` - è®¾å¤‡ç®¡ç†
- `/api/control` - è®¾å¤‡æ§åˆ¶
- `/api/files` - æ–‡ä»¶ç®¡ç†
- `/api/location` - ä½ç½®è¿½è¸ª
- `/api/apps` - åº”ç”¨ç®¡ç†
- `/api/membership` - ä¼šå‘˜ç®¡ç†
- `/api/agents` - ä»£ç†ç®¡ç†
- `/api/admin` - ç®¡ç†å‘˜åŠŸèƒ½
- `/api/payment` - æ”¯ä»˜ç®¡ç†
- `/api/notifications` - é€šçŸ¥ç®¡ç†
- `/api/system` - ç³»ç»Ÿç®¡ç†

è¯¦ç»†APIæ–‡æ¡£è¯·è®¿é—®ï¼šhttp://localhost:3000/api-docs

## ğŸ³ Dockeréƒ¨ç½²

### ä½¿ç”¨Docker Composeï¼ˆæ¨èï¼‰

```bash
# å¯åŠ¨æ‰€æœ‰æœåŠ¡
docker-compose up -d

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
docker-compose ps

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f app

# åœæ­¢æœåŠ¡
docker-compose down
```

### å•ç‹¬æ„å»ºDockeré•œåƒ

```bash
# æ„å»ºé•œåƒ
docker build -t device-management-system .

# è¿è¡Œå®¹å™¨
docker run -d -p 3000:3000 --name dms-app device-management-system
```

## ğŸš€ ç”Ÿäº§éƒ¨ç½²

### PM2éƒ¨ç½²

```bash
# å®‰è£…PM2
npm install -g pm2

# å¯åŠ¨åº”ç”¨
npm run pm2:start

# ç›‘æ§åº”ç”¨
pm2 monit

# æŸ¥çœ‹æ—¥å¿—
pm2 logs device-management-system
```

### ç¯å¢ƒé…ç½®

ç”Ÿäº§ç¯å¢ƒéœ€è¦é…ç½®ä»¥ä¸‹ç¯å¢ƒå˜é‡ï¼š

```bash
NODE_ENV=production
DB_HOST=your-mysql-host
DB_PASSWORD=your-mysql-password
REDIS_HOST=your-redis-host
JWT_SECRET=your-jwt-secret
# ... å…¶ä»–é…ç½®
```

## ğŸ§ª æµ‹è¯•

### è¿è¡Œæµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
npm test

# ç›‘å¬æ¨¡å¼
npm run test:watch

# ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
npm run test:coverage
```

### æµ‹è¯•ç»“æ„

```
tests/
â”œâ”€â”€ app.test.js          # åº”ç”¨ä¸»è¦åŠŸèƒ½æµ‹è¯•
â”œâ”€â”€ setup.js             # æµ‹è¯•ç¯å¢ƒè®¾ç½®
â”œâ”€â”€ env.js               # æµ‹è¯•ç¯å¢ƒå˜é‡
â”œâ”€â”€ globalSetup.js       # å…¨å±€æµ‹è¯•è®¾ç½®
â””â”€â”€ globalTeardown.js    # å…¨å±€æµ‹è¯•æ¸…ç†
```

## ğŸ“Š ç›‘æ§å’Œæ—¥å¿—

### æ—¥å¿—ç®¡ç†

- åº”ç”¨æ—¥å¿—ï¼š`logs/app.log`
- é”™è¯¯æ—¥å¿—ï¼š`logs/error.log`
- è®¿é—®æ—¥å¿—ï¼š`logs/access.log`

### ç›‘æ§æŒ‡æ ‡

- ç³»ç»Ÿå¥åº·çŠ¶æ€ï¼š`/api/health`
- ç³»ç»Ÿä¿¡æ¯ï¼š`/api/system/info`
- æ€§èƒ½æŒ‡æ ‡ï¼š`/api/system/metrics`

## ğŸ”’ å®‰å…¨æ€§

### å®‰å…¨ç‰¹æ€§

- JWTè®¤è¯å’Œæˆæƒ
- å¯†ç åŠ å¯†å­˜å‚¨
- è¯·æ±‚é€Ÿç‡é™åˆ¶
- CORSè·¨åŸŸä¿æŠ¤
- XSSå’ŒCSRFé˜²æŠ¤
- SQLæ³¨å…¥é˜²æŠ¤
- æ–‡ä»¶ä¸Šä¼ å®‰å…¨æ£€æŸ¥

### å®‰å…¨é…ç½®

```javascript
// å®‰å…¨ä¸­é—´ä»¶é…ç½®
app.use(helmet());
app.use(cors(corsOptions));
app.use(rateLimit(rateLimitOptions));
```

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Fork é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. æ‰“å¼€ Pull Request

## ğŸ“„ è®¸å¯è¯

MIT License - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶

## ğŸ“ æ”¯æŒ

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·ï¼š

- æäº¤ [Issue](https://github.com/your-org/device-management-system/issues)
- å‘é€é‚®ä»¶è‡³ï¼šsupport@devicemanagement.com
- æŸ¥çœ‹ [Wiki](https://github.com/your-org/device-management-system/wiki) æ–‡æ¡£

---

**è®¾å¤‡ç®¡ç†ç³»ç»Ÿ** - è®©è®¾å¤‡ç®¡ç†æ›´ç®€å•ã€æ›´æ™ºèƒ½ï¼